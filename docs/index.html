---

title: Jacobs VAULT

keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Installing">Installing<a class="anchor-link" href="#Installing"> </a></h2><p><strong>TBD:</strong></p>
<p>We recommend installing from conda.</p>
<table>
<thead><tr>
<th>Conda</th>
<th>Pip</th>
<th>Git</th>
</tr>
</thead>
<tbody>
<tr>
<td>Full <a href="https://www.anaconda.com/products/individual">Anaconda</a>:</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span>conda install -c &lt;CONDA CHANNEL&gt; jacobs-vault gh anaconda
</pre></div>
<p><a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a>):</p>
<div class="highlight"><pre><span></span>conda install -c &lt;CHANNEL&gt; -c jacobs-vault
</pre></div>
<p>| ```bash
pip install jacobs-vault</p>

<pre><code>| ```bash
git clone git@github.com:cmorris-jacobs/jacobs-vault.git</code></pre>
<p>or</p>
<div class="highlight"><pre><span></span>git clone https://github.com/cmorris-jacobs/jacobs-vault.git
</pre></div>
<p>|</p>
<h2 id="Using">Using<a class="anchor-link" href="#Using"> </a></h2><p>Change to the <code>jacobs-vault</code> folder and ensure that <code>data/</code> contains or points to the VAULT data. (SAY MORE!)  Then explore these options:</p>
<h3 id="Demo">Demo<a class="anchor-link" href="#Demo"> </a></h3><div class="highlight"><pre><span></span><span class="nb">cd</span> demo
. run.sh
</pre></div>
<p>May require linking <code>demo/data</code> to the data folder, e.g. <code>ln -s ../data ./</code>.</p>
<h3 id="Run-the-notebooks-in-nbs/">Run the notebooks in nbs/<a class="anchor-link" href="#Run-the-notebooks-in-nbs/"> </a></h3><p>Activate the <code>vault</code> Python virtual environment and start a new jupyter kernel.</p>
<div class="highlight"><pre><span></span>conda env -f environment.yml
conda activate vault
jupyter notebook
</pre></div>
<p>You can now explore and run the notebooks in the <code>nbs/</code> folder.</p>
<h3 id="Notes">Notes<a class="anchor-link" href="#Notes"> </a></h3><ul>
<li>Notebooks in <code>nbs/</code> contain <code>nbdev</code> markup. The <code>nbdev</code> package uses them to generate the project docs (including this README), generate some python modules, run tests, and perform limited Continuous Integration testing upon <code>git push</code> events. </li>
<li>Some code expects an Apache Spark setup with Hive and Hadoop available, and we have only tested on our cluster. However, our <code>cookie-cutter</code> template packages the Spark environments and our run scripts distribute those to the compute nodes for reproducibility. </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="About-jacobs-vault">About jacobs-vault<a class="anchor-link" href="#About-jacobs-vault"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>jacobs-vault partitions the data to support either distributed workflows (Spark), or fast single-ship satellite queries. It includes:</p>
<ul>
<li>ETL scripts in the <code>etl</code> folder</li>
<li>Call <code>skyfield</code> for ephemeris calculations</li>
<li>Notebooks folder <code>nbs/</code> for exploration.<ul>
<li>Via the <code>nbdev</code> package, notebooks generate modules that can be called by other scripts, and documentation (including this README).</li>
<li><code>nbs/01_HitTest.ipynb</code> generates jacobs-vault/hittest.py, used by <code>hittestservice.py</code> to display satellite starmaps given queries. </li>
</ul>
</li>
<li><code>geotransformer</code></li>
<li><code>ais-analytics</code></li>
<li>...</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Key-Required-Packages">Key Required Packages<a class="anchor-link" href="#Key-Required-Packages"> </a></h2><p>After cloning the repository, use the <code>conda</code> package manager to install the main dependencies. (We provide files for <code>pip</code>, but we recommend conda.)</p>
<div class="highlight"><pre><span></span>conda env create -f environment.yml
</pre></div>
<p>Key top-level packages fall in three broad categories:</p>
<h3 id="Scientific-Python-Ecosystem:">Scientific Python Ecosystem:<a class="anchor-link" href="#Scientific-Python-Ecosystem:"> </a></h3><ul>
<li>Core: numpy, pandas, ipython</li>
<li>Astronomy: skyfield, astropy, GDAL, pyephem, pyorbital  # &lt;-- do we really use all these still?</li>
<li>Clustering: <a href="https://hdbscan.readthedocs.io/en/latest/index.html">HDBSCAN</a></li>
<li>Notebooks: jupyter notebook</li>
</ul>
<h3 id="Cloud-Computing">Cloud Computing<a class="anchor-link" href="#Cloud-Computing"> </a></h3><ul>
<li>Spark, PySpark, Hive, Hadoop</li>
<li>(Other database as req'd)</li>
<li>Map support: geopandas, ...</li>
<li>Visualization: plotly, (matplotlib?), (leaflet?), (opensphere?)</li>
</ul>
<h3 id="Literate-Programming:">Literate Programming:<a class="anchor-link" href="#Literate-Programming:"> </a></h3><ul>
<li>nbdev, cookie-cutter</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tests">Tests<a class="anchor-link" href="#Tests"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To run the tests in parallel, launch:</p>
<p><code>nbdev_test_nbs</code> or <code>make test</code></p>
<p>For all the tests to pass, you'll need to install the following optional dependencies:</p>

<pre><code>pip install ...</code></pre>
<p>Tests are written using <code>nbdev</code>, for example see the documentation for <a href="/jacobs-vault/HitTest#hit_quality"><code>hit_quality</code></a> or <a href="/jacobs-vault/HitTest#viz"><code>viz</code></a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Contributing">Contributing<a class="anchor-link" href="#Contributing"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can clone the repository and install dependencies with ...</p>

<pre><code>git clone https://github.com/cmorris-jacobs/jacobs-vault
pip install -e "jacobs-vault[dev]"</code></pre>
<p>After you clone this repository, please run <code>nbdev_install_git_hooks</code> in your terminal. This sets up git hooks, which clean up the notebooks to remove the extraneous stuff stored in the notebooks (e.g. which cells you ran) which causes unnecessary merge conflicts.</p>
<p>Before submitting a PR, check that the local library and notebooks match. The script <code>nbdev_diff_nbs</code> can let you know if there is a difference between the local library and the notebooks.</p>
<ul>
<li>If you made a change to the <em>notebooks</em> in one of the exported cells, you can export it to the library with <code>nbdev_build_lib</code> or <code>make jacobs-vault</code>.</li>
<li>If you made a (small) change to the <em>library</em>, you can export it back to the notebooks with <code>nbdev_update_lib</code>.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Docker-Containers">Docker Containers<a class="anchor-link" href="#Docker-Containers"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We do not yet have official docker containers, but when done they should be available from <a href="https://github.com/cmorris-jacobs/docker-containers#jacobs-vault">the github site</a>.</p>

</div>
</div>
</div>
</div>
 

